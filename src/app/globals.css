@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 246 30% 6%;
    --foreground: 240 7% 80%;
    --card: 246 30% 12%;
    --card-foreground: 240 7% 80%;
    --popover: 246 30% 6%;
    --popover-foreground: 240 7% 80%;
    --primary: 265 90% 70%;
    --primary-foreground: 240 7% 95%;
    --secondary: 240 10% 20%;
    --secondary-foreground: 240 7% 95%;
    --muted: 240 10% 20%;
    --muted-foreground: 240 5% 55%;
    --accent: 300 90% 70%;
    --accent-foreground: 240 7% 95%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 240 10% 20%;
    --input: 240 10% 20%;
    --ring: 265 90% 70%;
    --chart-1: 265 90% 70%;
    --chart-2: 300 90% 70%;
    --chart-3: 198 93% 60%;
    --chart-4: 283 100% 41%;
    --chart-5: 342.1 92.5% 61.4%;

    --cor-fisico: hsl(10, 75%, 55%);
    --cor-mental: hsl(220, 75%, 60%);
    --cor-social: hsl(140, 55%, 50%);
  }

  .dark {
    --background: 246 30% 6%;
    --foreground: 240 7% 80%;
    --card: 246 30% 12%;
    --card-foreground: 240 7% 80%;
    --popover: 246 30% 6%;
    --popover-foreground: 240 7% 80%;
    --primary: 265 90% 70%;
    --primary-foreground: 240 7% 95%;
    --secondary: 240 10% 20%;
    --secondary-foreground: 240 7% 95%;
    --muted: 240 10% 20%;
    --muted-foreground: 240 5% 55%;
    --accent: 300 90% 70%;
    --accent-foreground: 240 7% 95%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 85.7% 97.3%;
    --border: 240 10% 20%;
    --input: 240 10% 20%;
    --ring: 265 90% 70%;
    --radius: 0.5rem;
  }
}

@layer base {
  html {
    @apply bg-background;
  }
  html::-webkit-scrollbar {
    display: none;
  }

  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    background: radial-gradient(ellipse at bottom, hsl(var(--background)) 0%, hsl(var(--background) / 0.9) 70%, transparent 100%);
  }
}

@layer components {
  .glassmorphic-card {
    @apply bg-card/50 backdrop-blur-lg border border-white/10 shadow-lg;
  }

  .sub-painel { @apply bg-card/60 border border-white/10 rounded-lg; }

  .page-container-visuals > * {
    --primary: hsl(var(--page-primary-color, 265), 90%, 70%);
    --accent: hsl(var(--page-accent-color, 300), 90%, 70%);
    --ring: hsl(var(--page-primary-color, 265));
  }
  
  .magical-glow {
    color: transparent;
    background-image: linear-gradient(to right, hsl(var(--primary)), hsl(var(--accent)));
    text-shadow: 0 0 8px hsl(var(--primary)), 0 0 16px hsl(var(--accent));
    background-clip: text;
    -webkit-background-clip: text;
    user-select: none;
  }

  .item-lista { @apply flex flex-col py-2; }
  .item-header { @apply flex justify-between items-center w-full; }
  .item-header .nome { @apply text-base font-semibold text-foreground/80; }
  .item-control { @apply w-full pt-3 relative; }

  .pilar-fisico { --pilar-color: var(--cor-fisico); }
  .pilar-mental { --pilar-color: var(--cor-mental); }
  .pilar-social { --pilar-color: var(--cor-social); }
  
  .dots-container { @apply flex gap-2 items-center justify-start p-1; }
  .dot { @apply w-3 h-3 bg-muted/70 cursor-pointer transition-all rounded-sm; transform: rotate(45deg); }
  .dot:hover { transform: rotate(45deg) scale(1.1); }
  .pilar-fisico .dot.selected { background-color: var(--cor-fisico); }
  .pilar-mental .dot.selected { background-color: var(--cor-mental); }
  .pilar-social .dot.selected { background-color: var(--cor-social); }

  .dot-sm { @apply w-2 h-2 bg-muted/50 rounded-full cursor-pointer transition-all; }
  .dot-sm.selected { @apply bg-primary; }
  .dot-sm:hover { @apply bg-primary/70 scale-110; }
  
  .grass-texture {
    background-color: #3a592a;
    background-image: 
        radial-gradient(circle at 100% 0, rgba(82, 128, 59, 0.4) 0%, rgba(82, 128, 59, 0) 10%),
        radial-gradient(circle at 0 50%, rgba(58, 89, 42, 0.2) 0%, rgba(58, 89, 42, 0) 6%),
        radial-gradient(circle at 20% 70%, #52803b 0%, #52803b 1%, transparent 1.2%),
        radial-gradient(circle at 80% 30%, #4a7334 0%, #4a7334 1%, transparent 1.2%),
        radial-gradient(circle at 50% 50%, #41662e 0%, #41662e 0.5%, transparent 0.7%),
        radial-gradient(circle at 30% 20%, #4a7334 0%, #4a7334 1.2%, transparent 1.4%),
        radial-gradient(circle at 70% 90%, #52803b 0%, #52803b 1.5%, transparent 1.7%),
        radial-gradient(circle at 90% 60%, #41662e 0%, #41662e 0.8%, transparent 1%),
        radial-gradient(circle at 10% 10%, #4a7334 0%, #4a7334 1.2%, transparent 1.4%);
    background-size: 100px 100px, 80px 80px, 40px 40px, 50px 50px, 30px 30px, 45px 45px, 55px 55px, 35px 35px, 60px 60px;
  }
}

@layer utilities {
  .hide-number-arrows::-webkit-outer-spin-button,
  .hide-number-arrows::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
  }
  .hide-number-arrows {
      -moz-appearance: textfield;
  }
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* EFEITOS DE ATRIBUTOS E PER√çCIAS */
  @keyframes shake-hard-diamond { 0%, 100% { transform: translate(0, 0) rotate(45deg); } 10% { transform: translate(-1px, -2px) rotate(44deg); } 20% { transform: translate(-3px, 0px) rotate(46deg); } 30% { transform: translate(3px, 2px) rotate(45deg); } 40% { transform: translate(1px, -1px) rotate(46deg); } 50% { transform: translate(-1px, 2px) rotate(44deg); } 60% { transform: translate(-3px, 1px) rotate(45deg); } 70% { transform: translate(3px, 1px) rotate(44deg); } 80% { transform: translate(-1px, -1px) rotate(46deg); } 90% { transform: translate(1px, 2px) rotate(45deg); } }
  @keyframes sonar-pulse-1 { from { box-shadow: 0 0 0 0px var(--pulse-color); } to { box-shadow: 0 0 0 16px transparent; } }
  @keyframes sonar-pulse-2 { from { box-shadow: 0 0 0 0px var(--pulse-color); } to { box-shadow: 0 0 0 24px transparent; } }
  @keyframes sonar-pulse-3 { from { box-shadow: 0 0 0 0px var(--pulse-color); } to { box-shadow: 0 0 0 32px transparent; } }
  
  @keyframes attribute-pulse { from { text-shadow: 0 0 15px var(--glow-color), 0 0 22px var(--glow-color); } to { text-shadow: 0 0 var(--glow-pulse-distance) var(--glow-color), 0 0 calc(var(--glow-pulse-distance) + 16px) var(--glow-color); } }
  @keyframes tremilique-1 { 0%, 100% { transform: translate(0, 0); } 20% { transform: translate(0.5px, -0.5px); } 40% { transform: translate(-0.5px, 0.5px); } 60% { transform: translate(0.5px, 0.5px); } 80% { transform: translate(-0.5px, -0.5px); } }
  @keyframes tremilique-2 { 0%, 100% { transform: translate(0, 0) rotate(0); } 10% { transform: translate(-1px, -1.5px) rotate(-0.5deg); } 30% { transform: translate(1.5px, 1px) rotate(0.5deg); } 50% { transform: translate(-0.5px, 1.5px) rotate(-0.5deg); } 70% { transform: translate(0.5px, -1px) rotate(0.5deg); } 90% { transform: translate(1.5px, 1px) rotate(0deg); } }
  @keyframes tremilique-3 { 0%, 100% { transform: translate(0, 0) rotate(0); } 10% { transform: translate(-2px, -3px) rotate(-1.5deg); } 20% { transform: translate(3px, 0px) rotate(1.5deg); } 30% { transform: translate(-2px, 2px) rotate(0deg); } 40% { transform: translate(2px, -1px) rotate(1.5deg); } 50% { transform: translate(-1px, 3px) rotate(-1.5deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1.5deg); } 80% { transform: translate(-1px, -2px) rotate(1.5deg); } 90% { transform: translate(2px, 3px) rotate(0deg); } }
  @keyframes tremilique-4 { 0%, 100% { transform: translate(0, 0) rotate(0); } 10% { transform: translate(-4px, -5px) rotate(-3deg); } 20% { transform: translate(5px, 0px) rotate(3deg); } 30% { transform: translate(-4px, 4px) rotate(0deg); } 40% { transform: translate(4px, -2px) rotate(3deg); } 50% { transform: translate(-2px, 5px) rotate(-3deg); } 60% { transform: translate(-5px, 2px) rotate(0deg); } 70% { transform: translate(5px, 2px) rotate(-3deg); } 80% { transform: translate(-2px, -2px) rotate(3deg); } 90% { transform: translate(4px, 5px) rotate(0deg); } }

  .dots-container.shaking .dot.selected { animation: shake-hard-diamond 0.4s infinite ease-in-out; }
  .dots-container.pulsing .dot.selected::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: 2px; animation-duration: 1.8s; animation-iteration-count: infinite; animation-delay: inherit; }
  .dots-container.pulsing-1 .dot.selected::after { animation-name: sonar-pulse-1; }
  .dots-container.pulsing-2 .dot.selected::after { animation-name: sonar-pulse-2; }
  .dots-container.pulsing-3 .dot.selected::after { animation-name: sonar-pulse-3; }
  
  .stepper-value.pulsing { animation: attribute-pulse 1.8s infinite alternate ease-in-out; }
  .stepper-value.shaking-1 { animation: tremilique-1 0.15s infinite; }
  .stepper-value.shaking-2 { animation: tremilique-2 0.3s infinite; }
  .stepper-value.shaking-3 { animation: tremilique-3 0.3s infinite; }
  .stepper-value.shaking-4 { animation: tremilique-4 0.4s infinite; }

  .stepper-value[data-glow-level="1"] { text-shadow: 0 0 10px var(--glow-color); } 
  .stepper-value[data-glow-level="2"] { text-shadow: 0 0 12px var(--glow-color), 0 0 16px var(--glow-color); } 
  .stepper-value[data-glow-level="3"] { text-shadow: 0 0 14px var(--glow-color), 0 0 20px var(--glow-color); }
  .stepper-value[data-glow-level="4"] { text-shadow: 0 0 16px var(--glow-color), 0 0 24px var(--glow-color); }
  .stepper-value[data-glow-level="5"] { text-shadow: 0 0 18px var(--glow-color), 0 0 28px var(--glow-color); }
  .stepper-value[data-glow-level="6"] { text-shadow: 0 0 20px var(--glow-color), 0 0 32px var(--glow-color); }
  .stepper-value[data-glow-level="7"] { text-shadow: 0 0 22px var(--glow-color), 0 0 36px var(--glow-color), 0 0 40px var(--glow-color); }
  
  .dots-container[data-glow-level="1"] .dot.selected { --glow-color: var(--pulse-color); box-shadow: 0 0 6px 1px var(--glow-color); }
  .dots-container[data-glow-level="2"] .dot.selected { --glow-color: var(--pulse-color); box-shadow: 0 0 8px 2px var(--glow-color); }
  .dots-container[data-glow-level="3"] .dot.selected { --glow-color: var(--pulse-color); box-shadow: 0 0 11px 3px var(--glow-color); }
  .dots-container[data-glow-level="4"] .dot.selected { --glow-color: var(--pulse-color); box-shadow: 0 0 14px 4px var(--glow-color); }
  .dots-container[data-glow-level="5"] .dot.selected { --glow-color: var(--pulse-color); box-shadow: 0 0 17px 5px var(--glow-color); }

  /* HEALTH PANEL */
    .health-diagram {
        display: grid;
        grid-template-areas:
            "left-arm head right-arm"
            "left-leg torso right-leg";
        grid-template-columns: 1fr auto 1fr;
        gap: 1rem;
        justify-items: center;
        align-items: center;
        width: 100%;
        max-width: 450px;
        margin: 0 auto;
    }

    .body-part-head { grid-area: head; }
    .body-part-torso { grid-area: torso; }
    .body-part-leftArm { grid-area: left-arm; justify-self: end; }
    .body-part-rightArm { grid-area: right-arm; justify-self: start; }
    .body-part-leftLeg { grid-area: left-leg; justify-self: end; }
    .body-part-rightLeg { grid-area: right-leg; justify-self: start; }
    
    .body-part-container { @apply flex flex-col items-center gap-2 relative; }
    .icon-container { @apply bg-black/40 rounded-md w-14 h-14 md:w-16 md:h-16 p-1 flex items-center justify-center; }

    .health-grid {
        display: grid;
        grid-template-columns: repeat(var(--grid-cols, 3), 1fr);
        gap: 4px;
        padding: 4px;
        background-color: theme('colors.black / 0.2');
        border-radius: theme('borderRadius.md');
    }
    
    .health-box {
        @apply w-4 h-4 rounded-sm cursor-pointer transition-all duration-200 relative border overflow-hidden;
    }
    
    .health-box:hover .inner-box {
        transform: scale(1.2);
        filter: brightness(1.2);
    }

    .inner-box {
        @apply w-full h-full transition-all duration-200;
    }
}
